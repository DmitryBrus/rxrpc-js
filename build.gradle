apply from: "$scriptsDir/nodejs.gradle"

yarnBuild {
    inputs.dir "$projectDir/src"
    inputs.file "$projectDir/tsconfig.json"
    outputs.dir "$projectDir/dist"
}

yarnPack {
    def outputFile = "${buildDir}/${project.name}.tgz"
    args += ['--filename', outputFile]
    outputs.file outputFile
}

project.afterEvaluate { yarn.dependsOn(createYarnWrapperScripts) }

task deleteBuildFiles(type: Delete) {
    delete "$projectDir/dist", "$project.buildDir"
}

clean.dependsOn(deleteBuildFiles)
